# Тестовое задание

## 1) Необходимо развернуть локально MS SQL Server и создать базу данных TEST
a. логин: kursUser пароль: kursPswd
b. создать таблицу R_CURRENCY (структура таблицы описана ниже)
## 2) Необходимо создать web сервис Golang & gorilla/mux, который будет по запросу забирать данные из публичного API национального банка и сохранять данные в локальную базу TEST
a. сервис должен слушать порт, указанный в config.json
b. подключение (Connection String) к MS SQL Server необходимо хранить в config.json
c. в сервисе должны быть реализованы 2 GET метода

- 1 метод: API .../currency/save/{date} , где {date} – часть адреса, а не параметр запроса
параметр date необходимо передать в API нац. банка, пример: https://nationalbank.kz/rss/get_rates.cfm?fdate=15.04.2021
Пример структуры XML с необходимыми полями

<rates>
​...
​<date>15.03.2019</date>
​<item>
​​<fullname>АВСТРАЛИЙСКИЙ ДОЛЛАР</fullname>
​​<title>AUD</title>
​​<description>267.39</description>
​​...
​</item>
​<item>
​​<fullname>АЗЕРБАЙДЖАНСКИЙ МАНАТ</fullname>
​​<title>AZN</title>
​​<description>223.27</description>
​​...
​</item>
​и далее все item’ы
</rates>

После того, как необходимые данные будут получены, их необходимо сохранить в таблицу R_CURRENCY, где A_DATE равна параметру date из XML. Сохранение делать асинхронно, в горутине. Отдать ответ пользователю, не дожидаясь завершения. Если возникнет ошибка при сохранении, записать в логи.
Успешным ответом данного метода является JSON объект с полем success = true.
Неуспешный ответ данного метода придумать самостоятельно.
- 2 метод API .../currency/{date}/{*code} принимает два параметра date и code, где code является необязательным параметром
В методе необходимо вытащить данные с указанными параметрами из БД и вернуть пользователю.
Успешным ответом данного метода является массив данных в формате JSON 
Неуспешный ответ данного метода придумать самостоятельно (нельзя показывать пользователю реальную ошибку из БД)
 
Структура таблицы R_CURRENCY
• ID – int                                 [PK, автоинкремент]
• TITLE  –  varchar(60)          [описание – наименование валюты]
• CODE  –  varchar(3)       [описание – код валюты]
• VALUE  –  numeric(18,2) [описание – значение]
• A_DATE  –  date                 [описание – на дату выгрузки]
Все поля таблицы должны запрещать вставку NULL значения
 
Исходный код отправить в ответном письме
По завершению задания, необходимо описать методы API и работу сервиса (формат на выбор: swagger, docx) и также приложить к исходникам.
Наличие автоматических тестов будет плюсом.
